(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{952:function(t,e,r){"use strict";r.r(e);r(72);var o=r(19),n={layout:"logged",components:{},data:function(){return{headers:[{text:"Usuario",sortable:!1,value:"fullName"},{text:"Cargo",sortable:!1,value:"position"},{text:"Correo electrónico",sortable:!1,value:"email"},{text:"Cant. reservas",sortable:!1,value:"amountOfReservations"},{text:"Estado",sortable:!1,value:"state"}],allUsers:[],visible:12,paginationLength:1,totalRows:0,formListUser:{acstkn:"",needle:"",limit:40,offset:0,page:1},currentUrl:""}},mounted:function(){this.listAndSearchUsers(),1!==parseInt(localStorage.getItem("currentRole"))&&this.$router.push({path:"/dashboard",force:!0});this.currentUrl=window.location.href,this.currentUrl==localStorage.getItem("firstPageUrl")?(this.formListUser.page=parseInt(localStorage.getItem("firstPageNumber")),this.formListUser.needle=localStorage.getItem("needle")):(localStorage.setItem("needle",this.formListUser.needle),localStorage.setItem("firstPageNumber",this.formListUser.page),localStorage.setItem("firstPageUrl",window.location.href)),localStorage.setItem("secondPageUrl","")},methods:{goToPositions:function(){localStorage.setItem("needle",this.formListUser.needle),localStorage.setItem("firstPageNumber",this.formListUser.page),this.$router.push("/users/positions")},listAndSearchUsers:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formListUser.acstkn=localStorage.getItem("acstkn"),t.formListUser.offset=(t.formListUser.page-1)*t.formListUser.limit,e.next=4,t.$store.dispatch("user/listUsers",t.formListUser).then((function(e){e.success&&100===e.code?(t.totalRows=e.body.total,t.allUsers=e.body.users,t.formListUser.limit>0&&t.totalRows>0?t.paginationLength=Math.ceil(t.totalRows/t.formListUser.limit):t.paginationLength=1):t.$router.push({path:"/logout",force:!0})})).catch((function(e){t.$router.push({path:"/logout",force:!0})}));case 4:case"end":return e.stop()}}),e)})))()},clearFilters:function(){this.formListUser.needle="",this.formListUser.page=1,this.setFilter()},setFilter:function(){this.formListUser.page=1,localStorage.setItem("needle",this.formListUser.needle),localStorage.setItem("firstPageNumber",this.formListUser.page),this.listAndSearchUsers()},changePage:function(){this.listAndSearchUsers(),localStorage.setItem("firstPageNumber",this.formListUser.page),localStorage.setItem("firstPageUrl",window.location.href),this.toSection()},toSection:function(){document.getElementById("topList").scrollIntoView({behavior:"smooth"})},changeUserState:function(t,e){var r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.$store.dispatch("user/changeUserState",{uid:t,active:"active"===e?0:1,acstkn:localStorage.getItem("acstkn"),logBoAdminId:localStorage.getItem("boAdminId")});case 2:r.listAndSearchUsers();case 3:case"end":return o.stop()}}),o)})))()},goToUserDeatils:function(t){localStorage.setItem("uid",t),this.$router.push("/users/userInfo")}}},l=r(30),c=r(90),m=r.n(c),f=r(791),d=r(806),h=r(941),v=r(842),U=r(903),L=r(939),S=r(809),I=r(817),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[r("v-row",{staticClass:"pl-4 pr-4"},[r("v-col",{attrs:{cols:"12",sm:"3",md:"3"}},[r("label",{attrs:{id:"topList"}},[t._v("Buscar:")]),t._v(" "),r("v-text-field",{staticClass:"classicInput",attrs:{placeholder:"Nombre, correo ó cargo",solo:"",flat:"",dense:"","append-icon":"search","hide-details":""},on:{keyup:function(e){return t.setFilter()}},model:{value:t.formListUser.needle,callback:function(e){t.$set(t.formListUser,"needle",e)},expression:"formListUser.needle"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}}),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"3",md:"3"}},[r("v-btn",{staticClass:"classicButton btnCreate",attrs:{dark:""},on:{click:function(e){return t.goToPositions()}}},[t._v("\n          Ver cargos\n        ")])],1)],1),t._v(" "),r("v-row",{staticClass:"pl-4 pr-4"},[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("div",[r("v-data-table",{staticClass:"dataTableStyle",attrs:{headers:t.headers,items:t.allUsers,"items-per-page":50,"hide-default-footer":""},scopedSlots:t._u([{key:"item.fullName",fn:function(e){var o=e.item;return[r("a",{staticClass:"classicLinkInsideTable",domProps:{innerHTML:t._s(o.fullName)},on:{click:function(e){return t.goToUserDeatils(o.uid)}}})]}},{key:"item.state",fn:function(e){var o=e.item;return["active"!==o.status?r("img",{staticClass:"imgAsSwitchTable",attrs:{src:"/ic_status_red.svg"},on:{click:function(e){return t.changeUserState(o.uid,o.status)}}}):t._e(),t._v(" "),"active"===o.status?r("img",{staticClass:"imgAsSwitchTable",attrs:{src:"/ic_status_green.svg"},on:{click:function(e){return t.changeUserState(o.uid,o.status)}}}):t._e()]}}])}),t._v(" "),r("div",{staticClass:"text-center pt-2 classicPagination"},[r("v-pagination",{attrs:{length:t.paginationLength,"total-visible":t.visible},on:{input:function(e){return t.changePage()}},model:{value:t.formListUser.page,callback:function(e){t.$set(t.formListUser,"page",e)},expression:"formListUser.page"}})],1)],1)])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VBtn:f.a,VCol:d.a,VDataTable:h.a,VFlex:v.a,VLayout:U.a,VPagination:L.a,VRow:S.a,VTextField:I.a})}}]);